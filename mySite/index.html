<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>

	<div class="wrap">
		<div id="input_string" contenteditable="true" data-text="Enter the string..."></div>
		<div class="error hidden">bad</div>
		<a href="" class="answer">Check</a>
		<a href="" class="clear">Clear</a>
	</div>

	<div class="result_wrap">
		<div class="result_item result_title">Result:</div>
		<div class="result_item" id="result"></div>
	</div>

	<style>
		.result_item{
			display: inline-block;
		}

		[contentEditable=true]:empty:not(:focus):before{
	        content:attr(data-text);
	        color: grey;
	    }
	    .hidden{
	    	display: none;
	    }

		#input_string{
			min-height: 20px;
			width: 200px;
			border: 1px solid black;
		}
	</style>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

	<script>
		// inititalization
		var st = '';

		var stack = [];
		var state;
		//clear input and result fields
		$(".clear").click(function(e){
			e.preventDefault();
			$("#input_string").text("");
			$("#result").text("");
		});

		$(".answer").click(function(e){
			e.preventDefault();
			state = 'OK';
			stack=[];
			
			st = $("#input_string").text();
			var stLen = st.length;

			// main loop
			for (i = 0; i < stLen; i++) {
				if (!checkBracket(st[i])) break;
			}

			// final check and results
			var res = 'string is invalid';

			if (stack.length == 0 && state == 'OK') {
				res = 'string is valid';
			}
				$("#result").text(res);
			stack = [];
		});




// --------------------------------------------------------------

function getCommonBracket(bracket){

	switch (bracket){
		case '(': return ')'
		case '{':  return '}'
		case '[': return ']'
		
		default:
			return false;
	}
}

// compare brackets in stack with current bracket in string
function checkBracket(currBracket)
{

	switch (currBracket) {
		case '(':
		case '[':
		case '{':
			stack.push(currBracket);
			break;

		case ')':
		case ']':
		case '}':
			if (stack.length == 0) { state = 'BAD'; return false; }

			if (currBracket == getCommonBracket(stack[stack.length - 1]) ) 
				stack.pop();
			else{
				state= 'BAD';
				return false;
			}
			break;

		default:
			state = 'BAD';
			console.log('Unacceptable symbol!');
			return false;
	}

	return true;
}

	</script>
	
</body>
</html>